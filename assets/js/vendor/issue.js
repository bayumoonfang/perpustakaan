(()=>{"use strict";var e,t={4069:(e,t,l)=>{var a=l(7294),n=l(3935),r=l(9062),c=l(5861),s=l(885),i=l(4687),o=l.n(i);const u=function(e){var t,l,n=e.user,i=e.title,u=e.admin_url,d=e.library,m=e.history,v=(0,a.useRef)(null),E=(0,a.useRef)(),b=1,h=JSON.parse(n),p=JSON.parse(d),f=JSON.parse(m),x="Data Buku Kosong",g="Loading..",k=(0,a.useState)(g),y=(0,s.Z)(k,2),w=y[0],S=y[1],j=(0,a.useState)(x),O=(0,s.Z)(j,2),B=O[0],_=O[1],P=(0,a.useState)("Data History Kosong"),Z=(0,s.Z)(P,2),C=Z[0],T=(Z[1],(0,a.useState)(p&&1===p.length?p[0].id:null)),N=(0,s.Z)(T,2),D=N[0],I=N[1],J=(0,a.useState)(null),K=(0,s.Z)(J,2),R=K[0],A=K[1],H=(0,a.useState)([]),L=(0,s.Z)(H,2),M=L[0],U=L[1],q=(0,a.useState)([]),F=(0,s.Z)(q,2),G=F[0],X=F[1],z=(0,a.useState)(f),Q=(0,s.Z)(z,2),V=Q[0],W=Q[1],Y=(0,a.useState)(!1),$=(0,s.Z)(Y,2),ee=$[0],te=$[1],le=(0,a.useState)({status:null,message:null}),ae=(0,s.Z)(le,2),ne=ae[0],re=ae[1],ce=(0,a.useState)(!1),se=(0,s.Z)(ce,2),ie=se[0],oe=se[1],ue=function(){var e=(0,c.Z)(o().mark((function e(){var t,l,a,n,r,c=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:D,l=c.length>1&&void 0!==c[1]?c[1]:R,_("Loading..."),e.next=5,fetch(u+"book/ajax/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({book:l,library:t})});case 5:return a=e.sent,e.next=8,a.json();case 8:n=e.sent,r=[],n.map((function(e){var t=G.filter((function(t){return t.id===e.id}));t&&t.length>0||r.push(e)})),U(r),_(x);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){E.current.focus()}),[]),(0,a.useEffect)((function(){if(D&&R){if(R.length<3)return _(x),void U([]);clearTimeout(v.current),v.current=setTimeout(ue.bind(void 0),800)}return!D&&(null==R?void 0:R.length)>=3?void _("Perpustakaan masih kosong"):void _(x)}),[R]);var de=function(){var e=(0,c.Z)(o().mark((function e(){var t,l,a,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(re({status:null,message:null}),G&&!(G&&G.length<1)){e.next=4;break}return re({status:!1,message:"Data issue masih kosong"}),e.abrupt("return");case 4:if(h){e.next=7;break}return re({status:!1,message:"Data user masih kosong"}),e.abrupt("return");case 7:if(D){e.next=10;break}return re({status:!1,message:"Data perpustakaan masih kosong"}),e.abrupt("return");case 10:return t=[],G.map((function(e){t.push(e.id)})),l={library:D,user:h.user_id,book:t},oe(!0),S(g),e.next=17,fetch(u+"book/ajax/issue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});case 17:return a=e.sent,e.next=20,a.json();case 20:if(null==(n=e.sent)||!n.status){e.next=33;break}return X([]),S("Mengambil data history peminjaman"),e.next=26,me();case 26:S(g),re(n),oe(!1),E.current.focus(),window.confirm("".concat(null==n?void 0:n.message,", ingin input user baru ? "))&&(window.location=u+"issue"),e.next=36;break;case 33:re(n),oe(!1),E.current.focus();case 36:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),me=function(){var e=(0,c.Z)(o().mark((function e(){var t,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return te(!0),e.next=3,fetch(u+"book/ajax/history/".concat(null==h?void 0:h.user_id),{method:"GET",headers:{"Content-Type":"application/json"}});case 3:return t=e.sent,e.next=6,t.json();case 6:l=e.sent,W(l),te(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function ve(e){return e.charAt(0).toUpperCase()+e.slice(1)}return a.createElement("div",{class:"page-content"},a.createElement("div",{class:"container-fluid"},a.createElement("div",{class:"row"},a.createElement("div",{class:"col-12"},a.createElement("div",{class:"page-title-box d-flex align-items-center justify-content-between"},a.createElement("h4",{class:"mb-0"},i," ",a.createElement("a",{href:u+"issue",class:"btn btn-secondary btn-sm ml-2"},"Kembali")),a.createElement("div",{class:"page-title-right"},a.createElement("ol",{class:"breadcrumb m-0"},a.createElement("li",{class:"breadcrumb-item"},a.createElement("a",{href:u},"Dashboard")),a.createElement("li",{class:"breadcrumb-item"},a.createElement("a",{href:u+"issue"},"Issue")),a.createElement("li",{class:"breadcrumb-item active"},i)))))),a.createElement("div",{class:"row"},a.createElement("div",{class:"col-12"},a.createElement("div",{class:"card"},a.createElement("div",{class:"card-body"},a.createElement("div",{class:"row"},a.createElement("div",{class:"mb-2 col-md-4"},a.createElement("div",{class:"text-muted"},"Nama:"),a.createElement("label",null,null==h?void 0:h.user_nama)),a.createElement("div",{class:"mb-2 col-md-4"},a.createElement("div",{class:"text-muted"},"Alamat:"),a.createElement("label",null,null==h?void 0:h.user_alamat)),a.createElement("div",{class:"mb-2 col-md-4"},a.createElement("div",{class:"text-muted"},"UID:"),a.createElement("label",null,null==h?void 0:h.user_uid)))))),a.createElement("div",{class:"col-6"},a.createElement("div",{class:"card"},a.createElement("div",{class:"card-body"},a.createElement("h5",null,"Cari Buku"),a.createElement("hr",null),p&&p.length>1&&a.createElement("div",{class:"row"},a.createElement("div",{class:"col-md-12"},a.createElement("div",{class:"form-group"},a.createElement("select",{onChange:function(e){var t=e.target.value;I(t),R&&(null==R?void 0:R.length)>=3&&(clearTimeout(v.current),ue(t))},name:"library",id:"select_perpustakaan",class:"form-control"},a.createElement("option",{value:"",disabled:!0,selected:!0},"Pilih Perpustakaan"),p.map((function(e){return a.createElement("option",{value:e.id},ve(e.library))})))))),p&&1===p.length&&a.createElement("div",null,a.createElement("h5",{class:"mb-2"},ve(null===(t=p[0])||void 0===t?void 0:t.library)),a.createElement("input",{type:"hidden",id:"select_perpustakaan",name:"library",value:null===(l=p[0])||void 0===l?void 0:l.id})),a.createElement("div",{class:"row"},a.createElement("div",{class:"col-md-12"},a.createElement("div",{class:"form-group"},a.createElement("input",{value:R,ref:E,onChange:function(e){A(e.target.value)},autofocus:!0,name:"book",type:"text",class:"form-control",id:"book-form-issue",placeholder:"Masukkan Barcode / Kode / Judul / ISBN buku untuk mencari ",required:!0,autocomplete:"off"})))),a.createElement("div",{class:"row"},a.createElement("div",{class:"col-md-12",id:"div-book-search-result"},M&&M.length<1&&a.createElement("div",{class:"text-muted text-center"},B),M&&M.length>0&&M.map((function(e){var t=!1,l=V.filter((function(t){var l;return e.id===(null==t||null===(l=t.book)||void 0===l?void 0:l.id)&&e.library===t.library}));return l&&l.length>0&&(t=!0),a.createElement("div",null,a.createElement("div",{class:"row"},a.createElement("div",{class:"text-muted col-md-3"},"Judul Buku"),a.createElement("div",{class:"text-muted col-md-1"},":"),a.createElement("div",{class:"col-md-8"},a.createElement("label",null,ve(null==e?void 0:e.title)))),a.createElement("div",{class:"row"},a.createElement("div",{class:"text-muted col-md-3"},"Kode Buku"),a.createElement("div",{class:"text-muted col-md-1"},":"),a.createElement("div",{class:"col-md-8"},a.createElement("label",null,null==e?void 0:e.code))),a.createElement("div",{class:"row"},a.createElement("div",{class:"text-muted col-md-3"},"Penulis"),a.createElement("div",{class:"text-muted col-md-1"},":"),a.createElement("div",{class:"col-md-8"},a.createElement("label",null,ve(null==e?void 0:e.author)))),a.createElement("div",{class:"row"},a.createElement("div",{class:"text-muted col-md-3"},"Kategori Buku"),a.createElement("div",{class:"text-muted col-md-1"},":"),a.createElement("div",{class:"col-md-8"},a.createElement("label",null,ve(null==e?void 0:e.category_name)))),a.createElement("div",{class:"row"},a.createElement("div",{class:"text-muted col-md-3"},"Rak Buku"),a.createElement("div",{class:"text-muted col-md-1"},":"),a.createElement("div",{class:"col-md-8"},a.createElement("label",null,null==e?void 0:e.rak_name))),a.createElement("div",{class:"row"},a.createElement("div",{class:"text-muted col-md-3"},"ISBN"),a.createElement("div",{class:"text-muted col-md-1"},":"),a.createElement("div",{class:"col-md-8"},a.createElement("label",null,null==e?void 0:e.isbn))),a.createElement("div",{class:"row"},a.createElement("div",{class:"text-muted col-md-3"},"Stok Buku"),a.createElement("div",{class:"text-muted col-md-1"},":"),a.createElement("div",{class:"col-md-8"},a.createElement("label",{class:"text-".concat(Number(null==e?void 0:e.stok)>0?"success":"danger")},null==e?void 0:e.stok))),!t&&(null==e?void 0:e.stok)>0&&!ie&&a.createElement("button",{type:"button",onClick:function(){return t=e,void((l=G.filter((function(e){return e.id===t.id})))&&l.length>0||(X([].concat((0,r.Z)(G),[t])),U([]),A(""),E.current.focus()));var t,l},class:"btn-choose-book btn btn-block btn-primary btn-sm"},"Pilih"),t&&a.createElement("div",{class:"text-center"},a.createElement("label",{class:"text-danger"},"Buku masih status pinjam. kembalikan terlebih dahulu")),a.createElement("hr",null))}))))))),a.createElement("div",{class:"col-6"},a.createElement("div",{class:"card"},a.createElement("div",{class:"card-body"},a.createElement("h5",null,"Data Issue"),a.createElement("hr",null),G&&G.map((function(e){return a.createElement("div",{style:{position:"relative"}},a.createElement("div",{class:"row"},a.createElement("div",{class:"text-muted col-md-3"},"Judul Buku"),a.createElement("div",{class:"text-muted col-md-1"},":"),a.createElement("div",{class:"col-md-8"},a.createElement("label",null,ve(null==e?void 0:e.title)))),a.createElement("div",{class:"row"},a.createElement("div",{class:"text-muted col-md-3"},"Kode Buku"),a.createElement("div",{class:"text-muted col-md-1"},":"),a.createElement("div",{class:"col-md-8"},a.createElement("label",null,null==e?void 0:e.code))),!ie&&a.createElement("button",{style:{position:"absolute",top:10,right:10},onClick:function(){return t=e,l=G.filter((function(e){return e.id!==t.id})),void X(l);var t,l},class:"btn btn-sm btn-danger"},"Hapus"),a.createElement("hr",null))})),G&&G.length>0&&a.createElement("button",{disabled:ie,onClick:de,class:"btn btn-block btn-success"},"Proses"),ie&&a.createElement("div",{class:"text-center mt-3"},a.createElement("label",{class:"text-muted"},w)),(null==ne?void 0:ne.message)&&a.createElement("div",{class:"row mt-3"},a.createElement("div",{class:"col-md-12"},a.createElement("div",{class:"alert alert-".concat(ne.status?"success":"danger")},ne.message)))))),a.createElement("div",{class:"col-12"},a.createElement("div",{class:"card"},a.createElement("div",{class:"card-body"},a.createElement("h5",null,"History Peminjaman"),a.createElement("hr",null),!ee&&(null==V?void 0:V.length)<1&&a.createElement("div",{class:"text-muted text-center"},C),ee&&a.createElement("div",{class:"text-muted text-center"},"Loding..."),!ee&&V&&V.length>0&&a.createElement("div",{class:"table-responsive"},a.createElement("table",{class:"table table-striped table-hover table-bordered dt-responsive nowrap",style:{borderCollapse:"collapse",borderSpacing:0,width:"100%"}},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",{width:"5%",class:"text-center"},"No"),a.createElement("th",{class:"text-center",width:"30%"},"Buku"),a.createElement("th",{width:"10%",class:"text-center"},"Status"),a.createElement("th",{width:"20%",class:"text-center"},"Tanggal Pinjam"),a.createElement("th",{width:"20%",class:"text-center"},"Tanggal Expired"),a.createElement("th",{width:"10%",class:"text-center"},"Action"))),a.createElement("tbody",null,V.sort((function(e,t){return t.expired-e.expired})).map((function(e){var t,l,n,r,c;return a.createElement("tr",{class:null!=e&&e.expired?"bg-danger text-white":""},a.createElement("td",{class:"text-center"},b++),a.createElement("td",null,a.createElement("label",null,null!=e&&e.book?ve(null==e||null===(t=e.book)||void 0===t?void 0:t.title):"-"),a.createElement("br",null),a.createElement("small",null,"ISBN : ",null!=e&&e.book?null==e||null===(l=e.book)||void 0===l?void 0:l.isbn:"-"),a.createElement("br",null),a.createElement("small",null,"Kode : ",null!=e&&e.book?null==e||null===(n=e.book)||void 0===n?void 0:n.code:"-"),a.createElement("br",null),a.createElement("small",null,"Penulis : ",null!=e&&e.book?null==e||null===(r=e.book)||void 0===r?void 0:r.author:"-"),a.createElement("br",null),a.createElement("small",null,a.createElement("b",null,null!=e&&e.library_name?null==e?void 0:e.library_name:"-"))),a.createElement("td",{class:"text-center"},null!=e&&e.expired?"EXPIRED":null==e||null===(c=e.status)||void 0===c?void 0:c.toUpperCase()),a.createElement("td",{class:"text-center"},null==e?void 0:e.issue_date),a.createElement("td",{class:"text-center"},null==e?void 0:e.expired_date),a.createElement("td",null,a.createElement("a",{href:u+"issue/".concat(null==e?void 0:e.id,"/kembali"),class:"btn btn-secondary"},"Pengembalian")))})))))))))))};var d=document.getElementById("root");n.render(a.createElement(u,d.dataset),d)}},l={};function a(e){var n=l[e];if(void 0!==n)return n.exports;var r=l[e]={exports:{}};return t[e](r,r.exports,a),r.exports}a.m=t,e=[],a.O=(t,l,n,r)=>{if(!l){var c=1/0;for(u=0;u<e.length;u++){for(var[l,n,r]=e[u],s=!0,i=0;i<l.length;i++)(!1&r||c>=r)&&Object.keys(a.O).every((e=>a.O[e](l[i])))?l.splice(i--,1):(s=!1,r<c&&(c=r));if(s){e.splice(u--,1);var o=n();void 0!==o&&(t=o)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[l,n,r]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.j=70,(()=>{var e={70:0};a.O.j=t=>0===e[t];var t=(t,l)=>{var n,r,[c,s,i]=l,o=0;if(c.some((t=>0!==e[t]))){for(n in s)a.o(s,n)&&(a.m[n]=s[n]);if(i)var u=i(a)}for(t&&t(l);o<c.length;o++)r=c[o],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(u)},l=self.webpackChunkelibrary=self.webpackChunkelibrary||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))})();var n=a.O(void 0,[736],(()=>a(4069)));n=a.O(n)})();